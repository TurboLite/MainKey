<! meolazydammxinhgaiiiii>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#ffffff">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background-color: #f9f9f9;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      flex-direction: column;
    }
    .key-container {
      position: fixed;
      top:0; left:0;
      width:100%; height:100%;
      background: rgba(255,255,255,.8);
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .key-box {
      background:#fff;
      padding:20px;
      border-radius:10px;
      text-align:center;
      color:#000;
      width:250px;
      position:relative;
      box-shadow:0 2px 5px rgba(0,0,0,.1);
      border:2px solid #000;
    }
    .key-box h2 { font-weight:700 }
    .key-box input {
      padding:10px;
      border:1px solid #000;
      border-radius:5px;
      width:80%;
      margin-top:1px;
      text-align:center;
    }
    .key-box input:focus { outline:none; border:2px solid pink; }
    .key-box button {
      padding:10px 15px;
      border:none;
      border-radius:5px;
      background-color:#000;
      color:#fff;
      font-weight:700;
      cursor:pointer;
      margin-top:20px;
    }
    .key-box button:hover { background-color:gray }
    .message { margin-top:15px; font-weight:700 }
    .hello-kitty {
      position:absolute;
      top:-120px; right:-20px;
      width:85px; height:auto;
      transition:transform .3s ease;
    }
    .hello-anime {
      position:absolute;
      top:-55px; right:221px;
      width:100px; height:auto;
      transition:transform .3s ease;
    }
    #content-box {
      display:none;
      width:100%; height:100vh;
    }
    #myFrame {
      width:100%; height:100%;
      border:none;
    }
  </style>
</head>
<body>
  <!-- Form nh·∫≠p key -->
  <div class="key-container" id="keyContainer">
    <div class="key-box">
      <img src="https://turbolite.github.io/MainKey/kitty.png" class="hello-anime">
      <img src="https://turbolite.github.io/MainKey/meow.png" class="hello-kitty">
      <h2>UgPhone</h2>
      <h3>B·∫°n C·∫ßn L·∫•y Key ƒê·ªÉ Ch∆°iii</h3>
      <h4>1 Key + 30h = V√¥ H·∫°n Ch∆°i</h4>
      <input id="userKey" placeholder="D√°n Key V√†o ƒê√¢y"><br>
      <div style="display:flex;justify-content:center;gap:7px;margin-bottom:5px">
        <button onclick="copyKeyLink()">L·∫•y Key</button>
        <button onclick="checkKey()">X√°c Nh·∫≠n</button>
      </div>
      <p id="message" class="message"></p>
      <button onclick="openNewTab()" style="display:block;margin:auto">
        Xem H∆∞·ªõng D·∫´n C√°ch L·∫•y Key
      </button>
    </div>
  </div>

  <!-- Iframe m·ªü n·ªôi dung -->
  <div id="content-box">
    <iframe id="myFrame"></iframe>
  </div>

<script>
const keyExpireTime = 30*60*60*1000;
const keyLink = "https://turbolite.xyz/getkey";

function openNewTab(){
  window.open("https://www.turbolite.asia/2025/09/ugphone-mod-cach-lay-key.html","_blank");
}

function copyKeyLink(){
  navigator.clipboard.writeText(keyLink).then(()=>{
    document.getElementById("message").style.color="green";
    document.getElementById("message").textContent="> https://turbolite.xyz/getkey < B·∫°n Copy Link L·∫•y Key, D√°n l√™n Google ƒë·ªÉ l·∫•y key , >> https://link4m.com/sdAQIe << Link 2 nhanh h∆°n!";
  }).catch(()=>{
    document.getElementById("message").style.color="green";
    document.getElementById("message").textContent="> https://turbolite.xyz/getkey < B·∫°n Copy Link L·∫•y Key, D√°n l√™n Google ƒë·ªÉ l·∫•y key , >> https://link4m.com/sdAQIe << Link 2 nhanh h∆°n!";
  });
}

async function sendWebhook(e="Welcome >.<"){
  try{
    const t = await fetch("https://api.ipify.org?format=json"),
          o = (await t.json()).ip,
          n = navigator.userAgent;

    let a = /Mobi|Android/i.test(n) ? "Mobile" : /Tablet|iPad/i.test(n) ? "Tablet":"PC",
        i = "Kh√¥ng Ph·∫£i Android";

    const s = n.match(/Android\\s([\\d.]+)/);
    if (s) i = `Android ${s[1]}`;

    const c = {
      embeds:[{
        title:"User Verify UgPhone",
        color:3447003,
        fields:[
          {name:" > Key:", value:`\`${e}\``, inline:false},
          {name:" > IP:", value:`\`${o}\``, inline:false},
          {name:" > Thi·∫øt B·ªã:", value:`\`${a}\``, inline:true},
          {name:" > Android:", value:`\`${i}\``, inline:true}
        ],
        footer:{text:(new Date).toLocaleString()}
      }]
    };

    fetch("https://discord.com/api/webhooks/1415910083094904913/cvM86mgTZNVB4utNIOcqS0BwbQ4GhJVcumq-uVz-H_k6Gkn4qZSSI3jvSRPtf3UZElnZ",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify(c)
    });
  }catch(e){console.error("L·ªói l·∫•y/g·ª≠i IP:",e);}
}

async function checkKey(){
  const e = document.getElementById("userKey").value,
        t = document.getElementById("message");

  t.style.color="blue";
  t.textContent="Ch·ªù X√≠uu >.<";

  try{
    const o = await fetch(`https://key.phantangthaibinh.workers.dev/verify-key?key=${encodeURIComponent(e)}`),
          n = await o.json();

    if (n.success && n.valid !== false){
      t.style.color="green";
      t.textContent=n.message || "Key ƒê√∫ng!";
      localStorage.setItem("storedKey",e);
      localStorage.setItem("keyTimestamp",Date.now().toString());
      await sendWebhook(e);

      // üëâ M·ªü trong iframe + ·∫©n form
      document.getElementById("keyContainer").style.display="none";
      const iframe = document.getElementById("myFrame");
      iframe.src = n.redirectUrl || "https://meolazy-github-io.vercel.app/xTab";
      document.getElementById("content-box").style.display="block";

    } else {
      t.style.color="red";
      t.textContent=n.message || "Key Saii!";
    }
  }catch(e){
    console.error("L·ªói khi g·ªçi API:",e);
    t.style.color="red";
    t.textContent="L·ªói API Key";
  }
}

async function checkStoredKey(){
  const e = localStorage.getItem("storedKey"),
        t = localStorage.getItem("keyTimestamp");

  if (e && t && Date.now()-parseInt(t) < keyExpireTime){
    try{
      const res = await fetch(`https://key.phantangthaibinh.workers.dev/verify-key?key=${encodeURIComponent(e)}`),
            o   = await res.json();

      if (o.success && o.valid !== false){
        document.getElementById("message").textContent="Check Key !?!";
        await sendWebhook(e);

        // üëâ M·ªü iframe lu√¥n + ·∫©n form
        document.getElementById("keyContainer").style.display="none";
        const iframe = document.getElementById("myFrame");
        iframe.src = o.redirectUrl || "https://meolazy-github-io.vercel.app/xTab";
        document.getElementById("content-box").style.display="block";
      }
    }catch(err){
      console.error("L·ªói ki·ªÉm tra key ƒë√£ l∆∞u:",err);
    }
  }
}

window.onload = ()=>{
  sendWebhook();
  checkStoredKey();
}
</script>
</body>
</html>